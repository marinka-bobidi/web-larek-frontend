# Проектная работа "Веб-ларек"

Стек: HTML, SCSS, TS, Webpack

Структура проекта:

- src/ — исходные файлы проекта
- src/components/ — папка с JS компонентами
- src/components/base/ — папка с базовым кодом

Важные файлы:

- src/pages/index.html — HTML-файл главной страницы
- src/types/index.ts — файл с типами
- src/index.ts — точка входа приложения
- src/styles/styles.scss — корневой файл стилей
- src/utils/constants.ts — файл с константами
- src/utils/utils.ts — файл с утилитами

## Установка и запуск

Для установки и запуска проекта необходимо выполнить команды

```
npm install
npm run start
```

или

```
yarn
yarn start
```

## Сборка

```
npm run build
```

или

```
yarn build
```

## Структура работы приложения

Для данной работы был выбран MVP-паттерн (Model-View-Presenter), он относится к группе MC-паттернов и является одним из самых простых в реализации.
Он состоит из следующих частей:

- Слой данных (Model) — данные, в которых содержиться вся основная логика приложения. При изменение данные попадают в отображение.
- Слой отображения (View) — отвечает за взимодействие с пользователем. Выводит на экран и работает с действиями пользователя, но никаких решений не применяет.
- Слой управления (Presenter) — слушает события в пользовательском интерфейсе и принимает решение, связан и с моделью, и с отображением, но они друг о друге ничего не знают.

Взаимодействие частей:
Model уведомляет Presenter об изменениях данных.
Presenter обновляет View на основе изменений в Model.
View передает действия пользователя Presenter, который в свою очередь обновляет Model.

## Типы данных

interface IApi:

```
    Интерфейс, описывающий API со стороны клиента, где:
        getProductList - запрос к серверу с целью получить каталог продукции в виде массива товаров IProduct[]
        submitPurchase - запрос к серверу с информацией об оплате пользователя и списком приобретенных товаров: forms, products
```

interface IView:

```
    Интерфейс, описывающий главное окно сайта, содержащее list - каталог товаров, basket - корзину пользователя.
```

interface IProduct:

```
    Интерфейс, описывающий типы данных продукции, где:
        id - id товара
        imageUrl - изображение товара
        type - категория товара
        title - наименование товара
        description - описание товара
        price - цена товара
```

interface ICard:

```
    Интерфейс, описывающий единицу карточки товара в каталоге продукции, где:
        product - объект продукции
        buttonCard - текст кнопки
        events: действие при нажатии на карточку для открытия модального окна карточки
```

interface ICardList:

```
    Интерфейс, описывающий каталог товаров, где:
        catalog - каталог карточек (массива объектов ICard[])
        total - конечное число объектов товаров на странице
```

interface IForms:

```
    Интерфейс, описывающий данные формы,где
        payment - форма оплаты
        adress - адресс получателя
        email: электронная почта
        phone: телефон получателя
```

interface IFormValidation:

```
    Интерфейс, описывающий валидацию формы,где:
        valid - принимает true, false - форма правильна, неправильна соответственно.
        errors - текст ошибки валидации
```

interface IFormSuccess:

```
    Интерфейс, описывающий итоговое окно после подветрждения оплаты, где:
        successUrl - изображение галочки (успешная оплата),
        success - текст успешной оплаты
        summary - общая сумма
        buttonSuccess - кнопка возвращения к покупкам
        event - действие при нажатии на кнопку
```

type TCardCategory:

```
    Тип данных для выбора категории товара
```

type TPayment:

```
    тип данных с выбором способа оплаты
```

## Методы

interface ICardEvt:

```
    Интерфейс описывающий действие при нажатии на карточку
```

interface IBasketAction:

```
    Интерфейс, описывающий управление товарами: удаление/добавление в корзину.
    Для добавления/удаления - методов add/remove соответственно требуется указание id - товара, то есть указание переменной product.
```

interface ISubmitPurchase:

```
    Интерфейс, описывающий действия при оформлении корзины:
        submitBasket - оформление корзины
        submitPaymentAdress - подтверждение данных о методе оплаты, адреса покупателя
        submitPurchase - подтверждение оплаты и переход на итоговую страницу
```

interface IFormSuccessClose:

```
    Интерфейс, описывающий действие при нажатии на кнопку при успешном оформлении заказа
```

## Модели данных

Класс API

```
Осуществляет получение и отправку данных с клиентской стороны сервера
- класс реализуется интерфейсом IApi
- содержит методы:
 getProductList: Этот метод получает список продуктов. Он возвращает промис, который разрешается в массив объектов типа IProduct.
 submitPurchase: Этот метод отправляет данные о покупке. Он принимает форму (form) и массив строк с идентификаторами продуктов (products). Возвращает промис, который разрешается в любом типе данных.
```

Класс Product

```
Класс, представляющий продукт в каталоге.
- класс реализуется интерфейсом IProduct
```

Класс BasketChoice

```
Класс, представляющий выбранные продукты.
- класс реализуется интерфейсом IBasketChoice

```

## Отображение

Класс View

```
Класс, представляющий главную страницу.
- класс реализуется интерфейсом IView
```

Класс Card

```
Класс, представляющий карточку товара в каталоге. Наследует класс Product.
- класс реализуется интерфейсом ICard
- содержит методы:
 ICardEvt: Вызывается при клике на карточку товара. Он принимает параметр event, который является объектом события мыши (MouseEvent) и содержит информацию о клике.
```

Класс CardList

```
Класс, представляющий каталог.
- класс реализуется интерфейсом ICardList
```

Класс Basket

```
Класс, представляющий корзину пользователя.
- класс реализуется интерфейсом IBasket
- содержит методы:
 add: Метод для добавления продукта в корзину. Принимает параметр product, который является строкой, представляющей идентификатор продукта.
 remove: Метод для удаления продукта из корзины. Принимает параметр product, который является строкой, представляющей идентификатор продукта.
 submitBasket: Метод для оформления корзины. Выполняет действия по завершению выбора товаров и подготовке к оплате.
```

Класс Order

```
Класс, отвечающий за сбор информации о заказе.
- класс реализуется интерфейсом IForms
- содержит методы:
 submitPaymentAdress: Метод для выбора оплаты и ввода адреса доставки. Выполняет действия по завершению заполнения.
  submitPurchase: Метод для почты и номера телефона. Выполняет действия по завершению заполнения.
```

Класс FormValidation

```
Класс, представляющий валидацию формы.
- класс реализуется интерфейсом IFormValidation
```

Класс Success

```
Класс, отвечающий за успешное оформление закааза.
- класс реализуется интерфейсом  IFormSuccess
- содержит методы:
 IFormSuccessClose: Метод для закрытия окна успешного оформления закааза.
```

## Управление

Класс EventEmitter

```
Класс, отвечающий за управление событиями в приложении.
- класс реализуется интерфейсом IEventEmitter
- содержит методы:
  on: Метод для подписки на событие. Принимает два параметра: event (строка, представляющая имя события) и listener (функция, которая будет вызвана при возникновении события).
  off: Метод для отписки от события. Принимает два параметра: event (строка, представляющая имя события) и listener (функция, которую нужно удалить из подписчиков).
  emit: Метод для вызова события. Принимает два параметра: event (строка, представляющая имя события) и данные (произвольный тип данных, которые будут переданы слушателям события).
```

## Реализация процессов

Процессы в приложении реализованы через события и promise-based flow:
События: Используются для взаимодействия между View и Presenter. Управление событиями осуществляется с помощью класса EventEmitter.
Promise-based flow: Используется для асинхронных операций, таких как получение данных из API.
