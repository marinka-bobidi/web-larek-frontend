# Проектная работа "Веб-ларек"

Стек: HTML, SCSS, TS, Webpack

Структура проекта:

- src/ — исходные файлы проекта
- src/components/ — папка с JS компонентами
- src/components/base/ — папка с базовым кодом

Важные файлы:

- src/pages/index.html — HTML-файл главной страницы
- src/types/index.ts — файл с типами
- src/index.ts — точка входа приложения
- src/styles/styles.scss — корневой файл стилей
- src/utils/constants.ts — файл с константами
- src/utils/utils.ts — файл с утилитами

## Установка и запуск

Для установки и запуска проекта необходимо выполнить команды

```
npm install
npm run start
```

или

```
yarn
yarn start
```

## Сборка

```
npm run build
```

или

```
yarn build
```

## Структура работы приложения

Для данной работы был выбран MVP-паттерн (Model-View-Presenter), он относится к группе MC-паттернов и является одним из самых простых в реализации.
Он состоит из следующих частей:

- Слой данных (Model) — данные, в которых содержиться вся основная логика приложения. При изменение данные попадают в отображение.
- Слой отображения (View) — отвечает за взимодействие с пользователем. Выводит на экран и работает с действиями пользователя, но никаких решений не применяет.
- Слой управления (Presenter) — слушает события в пользовательском интерфейсе и принимает решение, связан и с моделью, и с отображением, но они друг о друге ничего не знают.

Взаимодействие частей:
Model уведомляет Presenter об изменениях данных.
Presenter обновляет View на основе изменений в Model.
View передает действия пользователя Presenter, который в свою очередь обновляет Model.

## Типы данных

interface IApi:

```
    Интерфейс, описывающий API со стороны клиента, где:
        getProductList - запрос к серверу с целью получить каталог продукции в виде массива товаров IProduct[]
        submitPurchase - запрос к серверу с информацией об оплате пользователя и списком приобретенных товаров: forms, products
```

interface IProduct:

```
    Интерфейс, описывающий типы данных продукции, где:
        id - id товара
        image - изображение товара
        category - категория товара
        title - наименование товара
        description - описание товара
        price - цена товара
```

interface ICard:

```
    Интерфейс, описывающий единицу карточки товара в каталоге продукции, где:
        template - шаблон карточки
        product - объект продукции
        getInformation: получение информации о продуктктах
```

interface IModalWindow

```
    Интерфейс, описывающий все модальные окна, где:
        title - название модального окна
	    conteiner - содержание модального окна
        open: открывает модальное окно
        close: закрывает модальное окно
```

interface IPreviewModal

```
    Интерфейс, описывающий модальное окно карточки товара, где:
        product - продукт содержащийся в модальном окне
	    button - кнопка модального окна
        add: добавление товара в корзину
```

interface IDataBasket

```
    Интерфейс объекта данных, где:
        container - контейнер элемента корзины
        template: - копия контейнера элемента корзины
        headerClass - кнопка открытия корзины
        titleClass - название продукта
        indexClass - номер продукта
        priceClass - цена продукта
        totalClass - цена всех продуктов в корзине
        buttonClass - кнопка корзины
```

interface IBasket:

```
    Интерфейс, описывающий данные формы,где
        items - список продуктов
	    total - число продуктов
	    button - кнопка корзины
        deleteBasket: удвление элементов из корзины
        clearBasket: очищение корзины

```

interface IModalPurchase:

```
    Интерфейс, описывающий возможные способы оплаты,где
        payment - способы оплаты
```

interface IInformation:

```
    Интерфейс, описывающий информацию о покупке,где:
        itemsID - все id карточек продукта
        totalPrice - итоговая цена
        payment - способ оплаты
        adress - адресс покупателя
        email - почта покупателя
        phone - номер телефона покупателя
```

interface IProductRespons:

```
    Интерфейс, описывающий ответ API,где:
       total - количество продуктов
       items - список продуктов
```

interface IValidation:

```
    Интерфейс, описывающий валидацию полей форм,где:
       	input - конкретное поле формы;
        span - контейнер для ошибки валидации
        name - название поля валидации
        message - сообщение, содержащее информацию о непраельном заполнении формы;
        errors - наличее ошибки
        active: активация кнопки при правльной валидации
        inactive: отключение кнопки при не правльной валидации
        valid: проверка на валидность
```

interface IValidationForm:

```
    Интерфейс, описывающий валидацию форм,где:
       	input - все поля формы;
        button - кнопка реагирующая на правильность формы
        invalid - проверка на валидность
        check: проверяет валиднось
	    clearFields: очищает поля форм
```

type TCardCategory:

```
    Тип данных для выбора категории товара
```

type TPayment:

```
    тип данных с выбором способа оплаты
```

## Модели данных

Класс API

```

Класс, осуществляющий получение и отправку данных с клиентской стороны сервера.

- класс реализуется интерфейсом IApi
- содержит методы:
  getProductList: Этот метод получает список продуктов. Он возвращает промис, который разрешается в массив объектов типа IProduct.
  submitPurchase: Этот метод отправляет данные о покупке. Он принимает форму (form) и массив строк с идентификаторами продуктов (products). Возвращает промис, который разрешается в любом типе данных.

```

Класс Product

```

Класс, представляющий продукт в каталоге.

- класс реализуется интерфейсом IProduct

```

## Отображение

Класс Card

```

Класс, представляющий карточку товара в каталоге.

- класс реализуется интерфейсом ICard
- содержит методы:
  setInformation: Метод для получения информации о продукте и обновления свойств объекта product


```

Класс ModalWindow

```

Класс ModalWindow представляет модальное окно.

- класс реализуется интерфейсом IModalWindow
- содержит методы:
  open: Метод для открытия модального окна.
  close: Метод для закрытия модального окна.


```

Класс PreviewModal

```

Класс PreviewModal представляет карточку продукта в модальном окне.

- класс реализуется интерфейсом IPreviewModal
- содержит методы:
  transform: Метод для преобразования данных продукта.
  render: Метод для отображения данных продукта в модальном окне.
  add: Метод для добавления продуктов в модальное окно.

```

Класс Basket

```

Класс, представляющий корзину пользователя.

- класс реализуется интерфейсом IBasket
- содержит методы:
  abasketSubmitClear: Метод для очистки корзины после отправки заказа.
  deleteBasket: Метод для удаления товара из корзины.
  clearBasket: Метод для полной очистки корзины.
  render: Метод для отображения содержимого корзины.
  headerInsertion: Метод для вставки заголовка корзины.
  inactive: Метод для деактивации корзины.
  itemsToId: Метод для получения массива идентификаторов товаров в корзине.

```

Класс ModalPurchase

```

Класс, представляет модальное окно для выбора способа оплаты.

- класс реализуется интерфейсом IModalPurchase

```

Класс Validation

```

Класс, отвечает за валидацию инпутов.

- класс реализуется интерфейсом IValidation
- содержит методы:
  active: Метод для активации валидации.
  inactive: Метод для деактивации валидации.
  valid: Метод для проверки валидности инпута.

```

Класс ValidationForm

```

Класс, отвечает за валидацию форм.

- класс реализуется интерфейсом IValidationForm
- содержит методы:
  check: Метод для проверки валидности всех инпутов формы.
  clearFields: Метод для очистки всех полей формы.

```

## Управление

Класс EventEmitter

```

Класс, отвечающий за управление событиями в приложении.

- класс реализуется интерфейсом IEventEmitter
- содержит методы:
  on: Метод для подписки на событие. Принимает два параметра: event (строка, представляющая имя события) и listener (функция, которая будет вызвана при возникновении события).
  off: Метод для отписки от события. Принимает два параметра: event (строка, представляющая имя события) и listener (функция, которую нужно удалить из подписчиков).
  emit: Метод для вызова события. Принимает два параметра: event (строка, представляющая имя события) и данные (произвольный тип данных, которые будут переданы слушателям события).

```

## Реализация процессов

Процессы в приложении реализованы через события и promise-based flow:
События: Используются для взаимодействия между View и Presenter. Управление событиями осуществляется с помощью класса EventEmitter.
Promise-based flow: Используется для асинхронных операций, таких как получение данных из API.

```

```

```

```
